# sie-eng270-project-soil-assesment
# Evolution of soil compaction and water content under intensive agriculture
## Project Description
The purpose of the program is to modelise the evolution of two parameters of soil quality: water content and porosity, under agrcicultural work. It plots modelised + observed water content and porosity over time, allowing to check its accuracy.

## Input files
Describe the input files used by the program. (Located in "data/".)

The program takes initialisation data from a 20 year observation study for:
- Porosity ( mesure_porosity_1.csv and mesure_porosity_2.csv ) 
- agricultural work ( travail_agricole.csv )
- Water content ( real_SWC.csv )
But also data from meteofrance :
- Radiation ( rayonnement.csv )
- Precipitation and temperature ( temp_prec.csv ) 

## Output files
Describe the output files generated by the program. (To be generated in "results/".)
The final results consist of two plot files : 
-porosity_plot.png
-theta_obsVScomp_plot.png
These plots are produced from four intermediate result files, which are reused to generate the final plots:
- temp_prec_ray.csv ( generated by extraction_porosity.m and used by modele_water_content.c )
- theta_output.csv ( generated by modele_water_content.c and used by plot_theta.m and extraction_porosity.m)
- data_porosity_full.m ( generated by extraction_porosity.m and used by modele_porosity.c )
- data_porosity_full_out.m ( generated by modele_porosity.c and used by plot_poro.m ) 

## Report
Templates for .tex and .odt formats are provided in "docs/". The formatting can be changed, but the sections should remain the same. The final report should be placed in "docs/" as "report.pdf".

## Running the program
Dependencies
This project was developed on Mac and Windows and tested on the Windows environment. It should run without modification on this platform. The workflow relies on a combination of MATLAB and C, coordinated by MATLAB driver scripts.
Operating system
- The program runs safely on Windows 11, however there seems to be a problem with either the Matlab 2021-b version present on SIE Linux VDI or something else entirely out of our control on Linux as the program refused to work when tested. As the deadline was too close, we decided to left it like this by fear of making it worse. Please run the program on Windows. 
* The pipeline may also run on Linux, but this has not been formally tested.
MATLAB
* MATLAB R2021b or newer
* Required toolboxes:
    * No additional toolboxes are required beyond base MATLAB
* MATLAB is used for:
    * Data preprocessing and formatting
    * Orchestration of the modeling pipeline
    * Post-processing and visualization
All MATLAB scripts are located in the src/ directory and its subfolders.
C compiler
* GCC (GNU Compiler Collection)
    * Tested with gcc >= 9.4
* Used to compile:
    * modele_water_content.c
    * modele_porosity.c
* All the C files are save to bin. 
The compiler is invoked automatically from MATLAB using system calls.
External libraries
* None
All C code relies exclusively on the standard C library.
File formats
* Input and output data are handled using CSV files.
* Figures are exported as PNG images.
Notes
* Ensure that gcc is available in the system PATH.
* MATLAB must be able to execute system commands.
* All generated files are written to the results/ directory.

## Build
The C programs used in this project are compiled using GCC and do not rely on MATLAB MEX interfaces.
The C files are saved to "bin/" directory by the compiler.

## Execute
Describe how the program should be executed. Ideally, it will be automated to one line of code in a terminal running Bash (e.g., matlab -batch src/myscript), with the outputs generated to "results/".

## Contributors
Mathilde Lavanchy
Flora Journet

## Acknowledgments
Data Sources : 
* Baseline and verification of the model : 
 J. R. Lamichhane et al. “Effect of cropping systems and climate on soil physical characteristics, field crop
emergence and yield: A dataset from a 19-year field experiment”. In: Data in Brief 39 (Dec. 2021), p. 107581.
doi: 10.1016/j.dib.2021.10758
*Meteorological informations : Météo France. Météo.data.gouv.fr
*Note : the other references used to built the theoritical model but not directly present in the code are listed and explained in the report. 

Code
- Importation of csv in C, adaptation from https://sieprog.ch/#c/gps
- Matlab sorting : Virus inactivation exercice https://stakahama.gitlab.io/sie-eng270/exercise_inactivation.html
LLM

- ChatGPT was used in multiple C script for correction of the syntax + text processing
